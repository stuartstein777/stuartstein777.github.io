{"version":3,"sources":["exfn/helpers.cljs"],"mappings":"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","names":["exfn.helpers/get-source-line-numbers","source","cljs.core.reduce","p__34884","map__34885","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","cur","line-nos","acc","i","cljs.core._EQ_","clojure.string/starts-with?","cljs.core.assoc","cljs.core.update","cljs.core/inc","clojure.string.split","cljs.core.map","clojure.string/trim","exfn.helpers/keyed-collection","col","cljs.core/zipmap","cljs.core.range","cljs.core/count","var_args","args__4742__auto__","len__4736__auto__","i__4737__auto__","argseq__4743__auto__","cljs.core/IndexedSeq","exfn.helpers/deep-merge-with","seq34887","G__34888","cljs.core/first","cljs.core/next","self__4723__auto__","f","maps","cljs.core/every?","cljs.core/map?","cljs.core/merge-with","m","exfn.helpers/levenshtein-distance","a","b","n","init","cljs.core.concat","iter__4529__auto__","s__34890","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","b__34892","cljs.core/chunk-buffer","i__34891","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__34889","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","s__34894","b__34896","i__34895","iter__34893","j","table","p__34897","vec__34898","cljs.core.nth","d","exfn.helpers.deep_merge_with","G__34903","fexpr__34902","G__34904","x__4217__auto__","y__4218__auto__","fexpr__34906","G__34907","G__34909","fexpr__34908","G__34912","fexpr__34911","G__34913","s__34915","xs__6292__auto__","iterys__4525__auto__","s__34917","b__34919","i__34918","iter__34916","fs__4526__auto__","iter__34914","fexpr__34920","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.helpers\n  (:require [clojure.string :as str]))\n\n(defn get-source-line-numbers [source]\n  (:line-nos (reduce (fn [{:keys [cur line-nos] :as acc} i]\n                       (if (or (= \"\" i) (clojure.string/starts-with? i \";\"))\n                         (assoc acc :line-nos (str line-nos \"\\n\"))\n                         (-> acc\n                             (assoc :line-nos (str line-nos cur \"\\n\"))\n                             (update :cur inc))))\n                     {:cur 0 :line-nos \"\"}\n                     (->> (str/split source #\"\\r?\\n\" -1)\n                          (map str/trim)))))\n\n(defn keyed-collection [col]\n  (zipmap (range (count col)) col))\n\n(defn- deep-merge-with\n  \"\n  Copied here from clojure.contrib.map-utils. The original may have\n  been a casualty of the clojure.contrib cataclysm.\n  Like merge-with, but merges maps recursively, applying the given fn\n  only when there's a non-map at a particular level.\n  (deepmerge + {:a {:b {:c 1 :d {:x 1 :y 2}} :e 3} :f 4}\n               {:a {:b {:c 2 :d {:z 9} :z 3} :e 100}})\n  -> {:a {:b {:z 3, :c 3, :d {:z 9, :x 1, :y 2}}, :e 103}, :f 4}\n  \"\n  [f & maps]\n  (apply\n   (fn m [& maps]\n     (if (every? map? maps)\n       (apply merge-with m maps)\n       (apply f maps)))\n   maps))\n\n(defn levenshtein-distance\n  \"Copied from incanter\n   https://github.com/incanter/incanter/\n  http://en.wikipedia.org/wiki/Levenshtein_distance\n  internal representation is a table d with m+1 rows and n+1 columns\n  where m is the length of a and m is the length of b.\n  In information theory and computer science, the Levenshtein distance\n  is a metric for measuring the amount of difference between two sequences\n  (i.e., the so called edit distance).\n  The Levenshtein distance between two strings is given by the minimum number\n  of operations needed to transform one string into the other,\n  where an operation is an insertion, deletion, or substitution of a single character.\n  For example, the Levenshtein distance between \\\"kitten\\\" and \\\"sitting\\\" is 3,\n  since the following three edits change one into the other,\n  and there is no way to do it with fewer than three edits:\n   1. kitten \u2192 sitten (substitution of 's' for 'k')\n   2. sitten \u2192 sittin (substitution of 'i' for 'e')\n   3. sittin \u2192 sitting (insert 'g' at the end).\n  The Levenshtein distance has several simple upper and lower bounds that are useful\n  in applications which compute many of them and compare them. These include:\n    * It is always at least the difference of the sizes of the two strings.\n    * It is at most the length of the longer string.\n    * It is zero if and only if the strings are identical.\n    * If the strings are the same size, the Hamming distance is an upper bound on the Levenshtein distance.\n  \"\n  [a b]\n  (let [m (count a)\n        n (count b)\n        init (apply deep-merge-with (fn [a b] b)\n                    (concat\n                       ;;deletion\n                     (for [i (range 0 (inc m))]\n                       {i {0 i}})\n                       ;;insertion\n                     (for [j (range 0 (inc n))]\n                       {0 {j j}})))\n        table (reduce\n               (fn [d [i j]]\n                 (deep-merge-with\n                  (fn [a b] b)\n                  d\n                  {i {j (if (= (nth a (dec i))\n                               (nth b (dec j)))\n                          ((d (dec i)) (dec j))\n                          (min\n                           (+ ((d (dec i))\n                               j) 1) ;;deletion\n                           (+ ((d i)\n                               (dec j)) 1) ;;insertion\n                           (+ ((d (dec i))\n                               (dec j)) 1))) ;;substitution\n                      }}))\n               init\n               (for [j (range 1 (inc n))\n                     i (range 1 (inc m))] [i j]))]\n\n    ((table m) n)))\n"]}
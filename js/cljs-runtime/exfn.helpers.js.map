{"version":3,"sources":["exfn/helpers.cljs"],"mappings":";AAGA,AAAA,AAAMA,AAAyBC;AAA/B,AACE,AAAA,AAAW,AAACC,AAAO,AAAAC,AAAoCS;AAApC,AAAA,AAAAR,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAAA,AAA+BO;AAA/B,AAAAH,AAAAJ,AAAA,AAAaK;AAAb,AAAAD,AAAAJ,AAAA,AAAiBM;AAAjB,AACE,AAAI,AAAI,AAAA,AAACG,AAAKD,AAAG,AAAA,AAACE,AAA4BF;AAC5C,AAAA,AAACG,AAAMJ,AAAc,AAAA,AAAKD;;AACtBC,AACA,AAAA,AAACI,AAAgB,AAAA,AAAKL,AAASD,AAC/B,AAAA,AAACO,AAAYC;;AAL7B,AAAA,AAAA,AAAA,AAAA,AAOa,AAAA,AAAA,AAACC,AAAUjB,AACX,AAACkB,AAAIC;;AAE/B,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA","names":["exfn.helpers/get-source-line-numbers","source","cljs.core.reduce","p__34929","map__34930","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","cur","line-nos","acc","i","cljs.core._EQ_","clojure.string/starts-with?","cljs.core.assoc","cljs.core.update","cljs.core/inc","clojure.string.split","cljs.core.map","clojure.string/trim","exfn.helpers/get-supported-instructions"],"sourcesContent":["(ns exfn.helpers\n  (:require [clojure.string :as str]))\n\n(defn get-source-line-numbers [source]\n  (:line-nos (reduce (fn [{:keys [cur line-nos] :as acc} i]\n                       (if (or (= \"\" i) (clojure.string/starts-with? i \";\"))\n                         (assoc acc :line-nos (str line-nos \"\\n\"))\n                         (-> acc\n                             (assoc :line-nos (str line-nos cur \"\\n\"))\n                             (update :cur inc))))\n                     {:cur 0 :line-nos \"\"}\n                     (->> (str/split source #\"\\r?\\n\" -1)\n                          (map str/trim)))))\n\n(defn get-supported-instructions []\n  [{:instruction \"mov\"\n    :example      \"mov a b\"\n    :description  \"moves b (number or register) into register :a\"}\n   {:instruction \"add\"\n    :example      \"add a b\"\n    :description  \"a + b (numbers or registers), result goes into :a\"}\n   {:instruction \"sub\"\n    :example      \"sub a b\"\n    :description  \"a - b (numbers or registers), result goes into :a\"}\n   {:instruction \"mul\"\n    :example      \"mul a b\"\n    :description  \"a * b (numbers or registers), result goes into :a\"}\n   {:instruction \"div\"\n    :example      \"a / b\"\n    :description  \"a / b (numbers or registers), result goes into :a\"}\n   {:instruction \"and\"\n    :example      \"and a b\"\n    :description  \"a \u2227 b (numbers or registers), result goes into :a\"}\n   {:instruction \"or\"\n    :example      \"or a b\"\n    :description  \"a \u2228 b (numbers or registers), result goes into :a\"}\n   {:instruction \"xor\"\n    :example      \"xor a b\"\n    :description  \"a \u2295 b (numbers or registers), result goes into :a\"}\n   {:instruction \"dec\"\n    :example      \"dec a\"\n    :description  \"Decrements the register :a by one\"}\n   {:instruction \"inc\"\n    :example      \"inc a\"\n    :description  \"Increments the register :a by one\"}\n   {:instruction \"jnz\"\n    :example      \"jnz a b\"\n    :description  \"jumps y (number or register) instructions (positive or negative) if x (number or register) is not zero.\"}\n   {:instruction \"label\"\n    :example      \"foo:\"\n    :description  \"Creates a label foo: that can be used by jmp or call instructions. If encountered as an instruction it is ignored.\"}\n   {:instruction \"jmp\"\n    :example      \"jmp foo\"\n    :description  \"Moves the execution pointer to the label foo.\"}\n   {:instruction \"nop\"\n    :example      \"nop\"\n    :description  \"Does nothing.\"}\n   {:instruction \"cmp\"\n    :example      \"cmp x y\"\n    :description  \"compares x and y and stores the result in the internal register :cmp, result will either be x < y, x = y, x > y.\"}\n   {:instruction  \"jne\"\n    :example      \"jne foo\"\n    :description  \"jumps to the label foo if the result of the previous cmp call was that x /= y\"}\n   {:instruction  \"jg\"\n    :example      \"jg foo\"\n    :description  \"jumps to the label foo if the result of the previous cmp call was that x > y\"}\n   {:instruction  \"jge\"\n    :example      \"jge foo\"\n    :description  \"jumps to the label foo if the result of the previous cmp call was that x >= y\"}\n   {:instruction  \"je\"\n    :example      \"je foo\"\n    :description  \"jumps to the label foo if the result of the previous cmp call was that x = y\"}\n   {:instruction  \"jle\"\n    :example      \"jle foo\"\n    :description  \"jumps to the label foo if the result of the previous cmp call was that x <= y\"}\n   {:instruction  \"jl\"\n    :example      \"jl foo\"\n    :description  \"jumps to the label foo if the result of the previous cmp call was that x < y\"}\n   {:instruction  \"call\"\n    :example      \"call foo\"\n    :description  \"Moves the execution pointer to the label foo, pushes the current execution pointer onto the EIP stack so that it can be returned to by a ret instruction.\"}\n   {:instruction \"ret\"\n    :example      \"ret\"\n    :description  \"returns execution to the top execution pointer on the execution pointer stack. Results in popping eip stack.\"}\n   {:instruction \"end\"\n    :example      \"end\"\n    :description  \"terminates the program.\"}\n   {:instruction \"pop\"\n    :example      \"pop x\"\n    :description  \"Pops the top value off the stack into register x\"}\n   {:instruction \"push\"\n    :example      \"push x\"\n    :description  \"Pushes x (value or register) onto the stack\"}\n   {:instruction \"comments\"\n    :example      \"; foo\"\n    :description  \"Comments are ignored, can be on own line or trailing, e.g. mov a b ; moves b into a\"}])"]}
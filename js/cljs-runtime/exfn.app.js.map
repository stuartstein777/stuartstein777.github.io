{"version":3,"sources":["exfn/app.cljs"],"mappings":"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","names":["exfn.app/code-editor","cljs.core/deref","p1__35672#","source","re_frame.core.subscribe","exfn.helpers/get-source-line-numbers","re-frame.core/dispatch-sync","e","scroll-pos","re-frame.core/dispatch","exfn.app/code","code","breakpoints","code-with-lines","cljs.core/zipmap","cljs.core.range","cljs.core/count","eip","iter__4529__auto__","s__35674","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","b__35676","cljs.core/chunk-buffer","i__35675","vec__35677","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__35673","cljs.core/chunk-rest","vec__35684","cljs.core/first","cljs.core/cons","cljs.core/rest","line-no","code-line","cljs.core._EQ_","arguments","s__35681","b__35683","i__35682","iter__35680","s__35688","b__35690","i__35689","iter__35687","i","cljs.core/Keyword","cljs.core/val","cljs.core/key","exfn.app/execution-controls","is-running?","exfn.app/eip","exfn.app/registers","registers","cljs.core.not_EQ_","s__35692","b__35694","i__35693","iter__35691","r","cljs.core/second","exfn.app/internal-registers","internal-registers","s__35696","b__35698","i__35697","iter__35695","exfn.app/stack","stack","title","s__35700","b__35702","i__35701","iter__35699","cljs.core/reverse","exfn.app/symbol-table","symbols","cljs.core/seq?","s__35704","b__35706","i__35705","iter__35703","s","exfn.app/app","exfn.app/start","reagent.dom.render","js/document","exfn.app/init","js/exfn","js/exfn.app","js/exfn.app.initialize","exfn.app/initialize","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.app\n  (:require\n   [reagent.dom :as dom]\n   [exfn.subs]\n   [exfn.events]\n   [exfn.helpers :as h]\n   [re-frame.core :as rf]))\n\n;; DEV NOTES\n;; npx shadow-cljs watch app\n;; then open web page in browser\n;; then connect to repl.\n\n;; -- Reagent Components ------------------------------------------------------------\n\n;; Source Code Editor.\n(defn code-editor []\n  (let [source @(rf/subscribe [:source])]\n    [:div\n     [:div.editor\n      [:div.source-editor-header \"Source Editor\"]\n      [:textarea#lineNos.text-editor-line-nos {:readOnly  true\n                                               :value     (h/get-source-line-numbers source)}]\n      [:textarea#editor.text-editor {:on-change #(rf/dispatch-sync [:update-source (-> % .-target .-value)])\n                                     :on-scroll (fn [^js e]\n                                                  (let [scroll-pos (.. e -target -scrollTop)]\n                                                    (rf/dispatch [:update-scroll scroll-pos])))\n                                     :value     @(rf/subscribe [:source])\n                                     :wrap      :off}]]]))\n\n;; Display the parsed code.\n(defn code []\n  [:div.code-container\n   [:div.parsed-code-header \"Parsed Code\"]\n   (let [code @(rf/subscribe [:code])\n         breakpoints @(rf/subscribe [:breakpoints])\n         code-with-lines (zipmap (range (count code)) code)\n         eip @(rf/subscribe [:eip])]\n     [:table.code\n      [:tbody\n       (for [[line-no code-line] code-with-lines]\n         [:tr.code-line {:key line-no\n                         :style {:background-color (if (= eip line-no) \"goldenrod\" \"white\")}}\n          [:td.breakpoint\n           [:i.fas.fa-circle {:style {:color (if (some? (breakpoints line-no)) \"red\" \"lightgray\")}\n                              :on-click #(rf/dispatch [:toggle-breakpoint line-no])}]]\n          [:td.code-eip\n           [:i.fas.fa-angle-double-right\n            {:style {:visibility (if (= eip line-no) :visible :hidden)}}]]\n          [:td.line-number [:div {:style {:height 25}}\n                            line-no]]\n          [:td\n           [:span\n            [:label.instruction (first code-line)]\n            (let [arguments (rest code-line)]\n              (for [i (zipmap (range (count arguments)) arguments)]\n                (if (keyword? (val i))\n                  [:label.register {:key (key i)} (val i)]\n                  [:label.value {:key (key i)} (val i)])))]]])]])])\n\n;; Buttons that control the executing code (start/stop/pause/speed)\n(defn execution-controls []\n  [:div.row\n   (let [is-running? @(rf/subscribe [:running?])]\n     [:div.execution-controls\n      [:button.btn.btn-success.play-pause\n       {:on-click #(rf/dispatch [:toggle-running])}\n       (if is-running? [:i.fas.fa-pause] [:i.fas.fa-play])]\n      [:button.btn.btn-success.next-instruction\n       [:i.fas.fa-forward]]\n      [:button.btn.btn-danger.stop-button\n       [:i.fas.fa-stop]]\n      [:input.instr-per-sec {:type \"text\"\n                             :placeholder \"1\"}]\n      [:label.speed-label \"speed (secs / instruction.)\"]])])\n\n;; Display the current eip when running.\n(defn eip []\n  (let [eip @(rf/subscribe [:eip])]\n    [:div\n     [:label.eip-header \"EIP\"]\n     [:label.eip eip]]))\n\n;; Display the user registers.\n(defn registers []\n  (let [registers @(rf/subscribe [:registers])]\n    [:div.registers-container\n     [:div.registers-header \"Registers\"]\n     [:div.registers-list\n      (when (not= registers {})\n        (for [r registers]\n          [:div.row\n           [:div.col-col-lg6.register-name (first r)]\n           [:div.col-col-lg6.register-value (second r)]]))]]))\n\n;; Display the internal registers.\n(defn internal-registers []\n  (let [internal-registers @(rf/subscribe [:internal-registers])]\n    [:div.registers-container\n     [:div.registers-header \"Internal\"]\n     [:div.registers-list\n      (when (not= internal-registers {})\n        (for [r internal-registers]\n          [:div.row\n           [:div.col-col-lg6.register-name (first r)]\n           [:div.col-col-lg6.register-value (second r)]]))]]))\n\n;; Display the stack.\n(defn stack [stack title]\n  (let [stack @(rf/subscribe [stack])]\n    [:div.stack-container\n     [:div.stack-header title]\n     [:div.stack-list\n      (when (not= stack {})\n        (for [r (reverse stack)]\n          [:div.row\n           [:div.col-col-lg6.stack-value r]]))]]))\n\n;; Display the symbol table.\n(defn symbol-table []\n  (let [symbols @(rf/subscribe [:symbols])]\n    [:div.symbol-table-container\n     [:div.symbol-table-header \"Symbol Table\"]\n     [:div.symbol-table\n      (when (seq? symbols)\n        (for [s symbols]\n          [:div.row\n           [:div.col-col-lg6.stack-value s]]))]]))\n\n;; -- App ---------------------------------------------------------------------------\n(defn app []\n  [:div.content\n   [:div.row\n    [:div.col.col-lg-4\n     [code-editor]]\n    [:div.col.col-lg-4\n     [code]]\n    [:div.col.col-lg-4]]\n   [:div.row\n    [:button.btn.btn-primary.parse-btn {:on-click #(rf/dispatch [:parse])} \"Parse\"]]\n   [execution-controls]\n   [:div.row.eip-container\n    [eip]]\n   [:div.grid\n    [:div\n     [registers]]\n    [:div\n     [internal-registers]]\n    [:div\n     [stack :stack \"Stack\"]]\n    [:div\n     [stack :eip-stack \"EIP Stack\"]]\n    [:div\n     [symbol-table]]]])\n\n;; -- Dev Helpers -------------------------------------------------------------------\n(comment (rf/dispatch-sync [:initialize]))\n(comment (rf/dispatch-sync [:test-code]))\n(comment (rf/dispatch-sync [:parse]))\n(comment (rf/dispatch-sync [:toggle-breakpoint 11]))\n(comment \n  (let [registers [[:a 1] [:b 2] [:c 3] [:d 4] [:e 5] [:f 6]]]\n    ((doseq [[k v] registers]\n       (rf/dispatch-sync [:add-value-to-registers [k v]])))))\n(comment (rf/dispatch [:add-value-to-stack 5]))\n\n#_(let [db {:memory {:registers {:a 6, :b 7}}}]\n  (let [registers (-> db :memory :registers)]\n    registers\n    ))\n\n;; -- After-Load --------------------------------------------------------------------\n;; Do this after the page has loaded.\n;; Initialize the initial db state.\n(defn ^:dev/after-load start\n  []\n  (dom/render [app]\n              (.getElementById js/document \"app\")))\n\n(defn ^:export init []\n  (start))\n\n(defonce initialize (rf/dispatch-sync [:initialize]))       ; dispatch the event which will create the initial state. "]}
{"version":3,"sources":["day8/re_frame_10x/db.cljs"],"mappings":";AAIA,AAAA,AAAMA,AAASC;AAAf,AACE,AAAMC,AAA2B,AAAA,AAAA,AAACC;AAC5BC,AAA2B,AAAA,AAAA,AAACD;AAC5BE,AAA2B,AAAA,AAAA,AAACF;AAC5BG,AAA2B,AAAA,AAAA,AAACH;AAC5BI,AAA2B,AAACC,AAAK,AAACC,AAAY,AAAA,AAAA,AAACN;AAC/CO,AAA2B,AAAA,AAAA,AAACP;AAC5BQ,AAA2B,AAAA,AAAA,AAACR;AAC5BS,AAA2B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACT;AAC5BU,AAA2B,AAAA,AAAA,AAACV;AAC5BW,AAA2B,AAAA,AAAA,AAACX;AAC5BY,AAA2B,AAAA,AAAA,AAACZ;AAC5Ba,AAA2B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACb;AAC5Bc,AAA2B,AAAA,AAACd,AAAuC,AAAMe,AAAI,AAACC;AACLC,AAAI,AAACD;AADX,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEGD,AAASA,AACTE,AAASA;;AAC/EC,AAA2B,AAAA,AAAA,AAAClB;AAC5BmB,AAA2B,AAAA,AAAA,AAACnB;AAC5BoB,AAA2B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACpB;AAlBlC,AAmBE,AAAMW;AAAN,AACE,AAAA,AAAA,AAACU;;AADH;;AAEA,AAAA,AAAA,AAACA,AAAoCtB;;AACrC,AAAA,AAAA,AAACsB,AAAmCpB;;AACpC,AAAA,AAAA,AAACoB,AAAoCnB;;AACrC,AAAA,AAAA,AAACmB,AAA0CT;;AAC3C,AAAA,AAAA,AAACS,AAA+CP;;AAChD,AAAA,AAAA,AAACO,AAA2CR;;AAC5C,AAAA,AAAA,AAACQ,AAAqDH;;AACtD,AAAA,AAAA,AAACG,AAA8CF;;AAC/C,AAAA,AAAA,AAACE,AAA8BvB;;AAE/B,AAAA,AAAA,AAACuB,AAAkDZ;;AACnD,AAAMD;AAAN,AACE,AAAA,AAAA,AAACa;;AADH;;AAEA,AAAA,AAAA,AAACA,AAAkClB;;AACnC,AAAA,AAAA,AAACkB,AAAoCD;;AACrC,AAAA,AAAA,AAACC,AAAoDX;;AACrD,AAAA,AAAA,AAACW,AAA2BjB;;AAC5B,AAAA,AAAA,AAACiB,AAAuCd;;AACxC,AAAA,AAAA,AAACc;;AACD,AAAA,AAAA,AAACA","names":["day8.re-frame-10x.db/init-db","debug?","panel-width%","day8.re_frame_10x.utils.localstorage.get","show-panel?","selected-tab","filter-items","app-db-paths","cljs.core.into","cljs.core/sorted-map","json-ml-paths","external-window?","external-window-dimensions","show-epoch-traces?","using-trace?","ignored-events","low-level-trace","filtered-view-trace","id1","cljs.core/random-uuid","id2","num-epochs","follows-events?","categories","day8.re-frame-10x.inlined-deps.re-frame.v1v1v2.re-frame.core/dispatch"],"sourcesContent":["(ns day8.re-frame-10x.db\n  (:require [day8.re-frame-10x.inlined-deps.re-frame.v1v1v2.re-frame.core :as rf]\n            [day8.re-frame-10x.utils.localstorage :as localstorage]))\n\n(defn init-db [debug?]\n  (let [panel-width%               (localstorage/get \"panel-width-ratio\" 0.35)\n        show-panel?                (localstorage/get \"show-panel\" true)\n        selected-tab               (localstorage/get \"selected-tab\" :event)\n        filter-items               (localstorage/get \"filter-items\" [])\n        app-db-paths               (into (sorted-map) (localstorage/get \"app-db-paths\" {}))\n        json-ml-paths              (localstorage/get \"app-db-json-ml-expansions\" #{})\n        external-window?           (localstorage/get \"external-window?\" false)\n        external-window-dimensions (localstorage/get \"external-window-dimensions\" {:width 800 :height 800 :top 0 :left 0})\n        show-epoch-traces?         (localstorage/get \"show-epoch-traces?\" true)\n        using-trace?               (localstorage/get \"using-trace?\" true)\n        ignored-events             (localstorage/get \"ignored-events\" {})\n        low-level-trace            (localstorage/get \"low-level-trace\" {:reagent true :re-frame true})\n        filtered-view-trace        (localstorage/get \"filtered-view-trace\" (let [id1 (random-uuid)\n                                                                                 id2 (random-uuid)]\n                                                                             {id1 {:id id1 :ns-str \"re-com.box\" :ns 're-com.box :sort 0}\n                                                                              id2 {:id id2 :ns-str \"re-com.input-text\" :ns 're-com.input-text :sort 1}}))\n        num-epochs                 (localstorage/get \"retained-epochs\" 25)\n        follows-events?            (localstorage/get \"app-db-follows-events?\" true)\n        categories                 (localstorage/get \"categories\" #{:event :sub/run :sub/create :sub/dispose})]\n    (when using-trace?\n      (rf/dispatch [:global/enable-tracing]))\n    (rf/dispatch [:settings/panel-width% panel-width%])\n    (rf/dispatch [:settings/show-panel? show-panel?])\n    (rf/dispatch [:settings/selected-tab selected-tab])\n    (rf/dispatch [:settings/set-ignored-events ignored-events])\n    (rf/dispatch [:settings/set-filtered-view-trace filtered-view-trace])\n    (rf/dispatch [:settings/set-low-level-trace low-level-trace])\n    (rf/dispatch [:settings/set-number-of-retained-epochs num-epochs])\n    (rf/dispatch [:settings/app-db-follows-events? follows-events?])\n    (rf/dispatch [:settings/debug? debug?])\n    ;; Important that window dimensions are set before we open an external window.\n    (rf/dispatch [:settings/external-window-dimensions external-window-dimensions])\n    (when external-window?\n      (rf/dispatch [:global/launch-external]))\n    (rf/dispatch [:traces/filter-items filter-items])\n    (rf/dispatch [:traces/set-categories categories])\n    (rf/dispatch [:trace-panel/update-show-epoch-traces? show-epoch-traces?])\n    (rf/dispatch [:app-db/paths app-db-paths])\n    (rf/dispatch [:app-db/set-json-ml-paths json-ml-paths])\n    (rf/dispatch [:global/add-unload-hook])\n    (rf/dispatch [:app-db/reagent-id])))\n"]}
{"version":3,"sources":["exfn/settings/view.cljs"],"mappings":"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","names":["p1__15585#","exfn.settings.view/account-type-row","account-type","cljs.core/reset!","re-frame.core/dispatch-sync","exfn.settings.view/account-types","account-types","cljs.core/deref","p1__15590#","new-account-type","re_frame.core.subscribe","iter__5523__auto__","s__15595","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__15597","cljs.core/chunk-buffer","i__15596","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__15594","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","exfn.settings.view/view","error","loading?","acc-types","settings","selected-year","reagent.core.atom","p1__15610#","exfn.shared.error/error-indicator","exfn.shared.loading/loading","cljs.core/List","cljs.core._EQ_","build-settings","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.settings.view\n  (:require [re-frame.core :as rf]\n            [exfn.shared.subscriptions]\n            [exfn.shared.error :as err]\n            [reagent.core :as r]\n            [exfn.shared.loading :as loading]\n            [exfn.settings.subscriptions]\n            [exfn.settings.events]\n            [goog.string :as gstring]\n            [goog.string.format]))\n\n(defn account-type-row [account-type]\n  [:tr\n   [:td \n    [:input.form-control\n     {:type :text\n      :style {:width 180}\n      :value (account-type :description)\n      :on-change #(reset! (account-type :description) (-> % .-target .-value))}]]\n   [:td\n    [:button.btn.btn-sm \n     {:on-click #(rf/dispatch-sync [:delete-account-type {:account-type-id (account-type :account-type-id)}])}\n     [:i.fas.fa-trash]]]])\n\n(defn account-types [account-types]\n  (let [new-account-type @(rf/subscribe [:new-account-type])]\n    [:table.table.table-sm\n     {:style {:width 250}}\n     [:thead\n      [:tr\n       [:th \"Account Type\"]\n       [:th]\n       [:th]]]\n     [:tbody\n      (for [account-type account-types]\n        [account-type-row account-type])\n      [:tr\n       [:td\n        [:input.form-control\n         {:type         :text\n          :style        {:width 180}\n          :defaultValue new-account-type\n          :on-change    #(rf/dispatch-sync [:update-account-type-input (-> % .-target .-value)])}]]\n       [:td\n        [:button.btn.btn-sm.btn-primary\n         {:on-click (fn []\n                      (rf/dispatch-sync [:add-account-type]))}\n         \"Add\"]]]]]))\n\n(defn view []\n  (let [error @(rf/subscribe [:error])\n        loading? @(rf/subscribe [:loading?])\n        acc-types @(rf/subscribe [:account-types])\n        settings @(rf/subscribe [:settings])\n        selected-year (r/atom (settings :year))]\n    (letfn [(build-settings \n              [] \n              {:year @selected-year\n               :account-types acc-types})]\n      [:main.col-md-9.ms-sm-auto.col-lg-10.px-md-4\n       [:div.d-flex.justify-content-between.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom\n        [:h1.h2 \"Settings\"]]\n       [:div\n        (cond\n          error [err/error-indicator error :month]\n          loading? [loading/loading loading?]\n          :else\n          [:div\n           [:div.row\n            [:h4 \"Current Year\"]]\n           [:div.row\n            [:div.col.col-lg-2\n             [:div.input-group.input-group-sm.mb-3\n              [:div.input-group-prepend\n               [:span.input-group-text \"Year\"]]\n              [:select.custom-select\n               {:on-change #(reset! selected-year (-> % .-target .-value))}\n               (list \n                [:option {:value    2020\n                          :key      2020\n                          :selected (= 2020 (settings :year))} 2020]\n                [:option {:value    2021\n                          :key      2021\n                          :selected (= 2021 (settings :year))} 2021]\n                [:option {:value    2022\n                          :key      2022\n                          :selected (= 2022 (settings :year))} 2022]\n                [:option {:value    2023\n                          :key      2023\n                          :selected (= 2023 (settings :year))} 2023])]]]\n            [:div.col\n             [:button.btn.btn-primary\n              {:on-click #(rf/dispatch-sync [:save-settings (build-settings)])}\n              \"Save\"]]\n            [:div.row\n             [:h4 \"Account Types\"]]\n            [:div.row\n             [account-types acc-types]]]])]])))\n\n(comment\n  \n  \n  )"]}
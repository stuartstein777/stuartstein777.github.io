{"version":3,"sources":["exfn/total_income/logic.cljs"],"mappings":";AAEA,qCAAA,rCAAMA,kFAAYC,EAAEC,EAAEC;AAAtB,sGACOF,9CACA,AAACG,4CAAIF,pGACL,OAACG,+CAAOF;;AAEf,sCAAA,tCAAMG,oFAAaC;AAAnB,2EACS,AAACH,4CAAI,WAAKI,lIACV,uEAAA,hEAACH,+CAAOK;AADH,AAAQ,IAAAD,mBAAI,AAAA,sFAAQD;AAAZ,AAAA,oBAAAC;AAAAA;;AAAe,OAAA,sFAASD;;GAAKD;;AAGnD,iCAAA,jCAAMI,0EAAQJ;AAAd,AAAA,kDAAA,qGAAA,mKAAA,iOAAA,uMAAA,qLAAA,7yBACuB,AAACD,oCAAYC,4DACb,2CAAA,3CAACP,mCAAWO,2DAAaG,oGACzB,2CAAA,3CAACV,mCAAWO,0FAA4BG,uFACxC,2CAAA,3CAACV,mCAAWO,6EAAsBG,8EAClC,2CAAA,3CAACV,mCAAWO,oEAAiBG,0EAC7B,2CAAA,3CAACV,mCAAWO,gEAAgBG;;AAEnD,oDAAA,pDAAME,gHAA2BL;AAAjC,AAEO,OAACM,+CAAO,WAAKL;AAAL,AAAQ,SAAK,2IAAA,3IAACM,6CAAE,AAAA,2FAAWN,cACd,AAACO,cAAI,iBAAAN,mBAAI,AAAA,iFAAMD;AAAV,AAAA,oBAAAC;AAAAA;;AAAA,IAAAA,uBACI,AAAA,gHAAqBD;AADzB,AAAA,oBAAAC;AAAAA;;AAAA,IAAAA,uBAEI,AAAA,mGAAeD;AAFnB,AAAA,oBAAAC;AAAAA;;AAGI,OAAA,0FAAUD;;;;;GALxCD","names":["exfn.total-income.logic/map-reduce","m","f","r","cljs.core.map","cljs.core.reduce","exfn.total-income.logic/total-gross","incomes","i","or__5045__auto__","cljs.core/+","exfn.total-income.logic/totals","exfn.total-income.logic/missing-salary-deductions","cljs.core.filter","cljs.core._EQ_","cljs.core/not"],"sourcesContent":["(ns exfn.total-income.logic)\n\n(defn map-reduce [m f r]\n  (->> m\n       (map f)\n       (reduce r)))\n\n(defn total-gross [incomes]\n    (->> (map (fn [i] (or (:gross i) (:amount i))) incomes)\n         (reduce + 0.0)))\n\n(defn totals [incomes]\n  {:gross              (total-gross incomes)\n   :tax                (map-reduce incomes :tax +)\n   :national-insurance (map-reduce incomes :national-insurance +)\n   :student-loan       (map-reduce incomes :student-loan +)\n   :pension            (map-reduce incomes :pension +)\n   :amount             (map-reduce incomes :amount +)})\n\n(defn missing-salary-deductions [incomes]\n  (->> incomes\n       (filter (fn [i] (and (= (:category i) 14)\n                            (not (or (:tax i)\n                                     (:national-insurance i)\n                                     (:student-loan i)\n                                     (:pension i))))))))\n\n"]}
{"version":3,"sources":["exfn/dividends/view.cljs"],"mappings":"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","names":["exfn.dividends.view/date-picker","vec__19924","cljs.core.nth","value","onChange","js/shadow.js.shim.module$react.useState","js/Date","reagent.core.as_element","js/shadow.js.shim.module$react_date_picker.default","v","re-frame.core/dispatch-sync","exfn.dividends.view/view","cljs.core/deref","p1__19927#","p1__19928#","p1__19929#","dividends","re_frame.core.subscribe","ui","error","loading?","exfn.shared.error/error-indicator","exfn.shared.loading/loading","iter__5523__auto__","s__19931","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__19933","cljs.core/chunk-buffer","i__19932","map__19934","cljs.core/-nth","cljs.core/--destructure-map","cljs.core.get","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__19930","cljs.core/chunk-rest","map__19935","cljs.core/first","cljs.core/cons","cljs.core/rest","date","company","amount","currency","exchange-rate","id","amount-gbp","cljs.core.sort_by","goog.string/format","exfn.dividends.logic/total-amount","exfn.dividends.logic/total-amount-gbp","s__19937","b__19939","i__19938","iter__19936","d","cljs.core._EQ_","exfn.dividends.logic/get-currency-symbol","_","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.dividends.view\n  (:require [exfn.shared.error :as err]\n            [\"react\" :as react]\n            [\"react-date-picker\" :default DatePicker]\n            [re-frame.core :as rf]\n            [reagent.core :as r]\n            [exfn.dividends.subscriptions]\n            [exfn.shared.loading :as loading]\n            [goog.string :as gstring]\n            [goog.string.format]\n            [exfn.dividends.logic :as dlogic]))\n\n(defn date-picker []\n  (let [[value onChange] (react/useState (new js/Date))]\n    (r/as-element\n     [:> DatePicker\n      {:value value, \n       :onChange (fn [v] \n                   (onChange v)\n                   (rf/dispatch-sync [:dividends/date v])\n                   (rf/dispatch-sync [:dividends/:get-exchange-rate v]))}])))\n\n(defn view []\n  (let [dividends @(rf/subscribe [:dividends])\n        ui        @(rf/subscribe [:dividends-ui])\n        error     @(rf/subscribe [:error])\n        loading?  @(rf/subscribe [:loading?])]\n    [:main.col-md-9.ms-sm-auto.col-lg-10.px-md-4\n     [:div\n      [:div.d-flex.justify-content-between.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom\n       [:h1.h2 \"Dividends\"]]]\n     [:div.row\n      [:div.col.col-lg-8\n       (cond\n         error [err/error-indicator error :purchase]\n         loading? [loading/loading loading?]\n         :else\n         [:div.row\n          {:style {:width 800}}\n          [:div.table-responsive\n           [:table.table.table-striped.table-sm.table-hover\n            [:thead\n             [:tr\n              [:th \"Date\"]\n              [:th \"Company\"]\n              [:th.amount-col \"Amount\"]\n              [:th.center-col \"Currency\"]\n              [:th.amount-col \"Exchange Rate\"]\n              [:th.amount-col \"Amount \u00a3\"]]]\n            [:tbody\n             (for [{:keys [date company amount currency exchange-rate id amount-gbp]}\n                   (sort-by :date dividends)]\n               [:tr\n                [:td date]\n                [:td company]\n                [:td.amount-col (gstring/format \"%.2f\" amount)]\n                [:td.center-col currency]\n                [:td.amount-col (gstring/format \"%.2f\" exchange-rate)]\n                [:td.amount-col (gstring/format \"%.2f\" amount-gbp)]])\n             [:tr.total-row\n              [:td {:col-span 2} \"Total\"]\n              [:td.amount-col (gstring/format \"%.2f\" (dlogic/total-amount dividends))]\n              [:td.center-col \"\"]\n              [:td.amount-col \"\"]\n              [:td.amount-col (gstring/format \"%.2f\" (dlogic/total-amount-gbp dividends))]]]]]])]\n      [:div.col.col-lg-4\n       [:div\n        [:h4 \"Add Dividend\"]]\n       [:div.row\n        {:style {:padding 5 :width 150}}\n        [:> date-picker]]       \n       [:div.row\n        {:style {:padding 5 :width 250}}\n        [:div.input-group.input-group-sm.mb-3\n         [:div.input-group-prepend\n          [:span.input-group-text \"Currency\"]]\n         [:select.custom-select\n          {:on-change #(rf/dispatch-sync [:dividends/currency (-> % .-target .-key)])}\n          (for [d [\"GBP\" \"USD\" \"EUR\"]]\n            [:option {:value d,\n                      :key d\n                      :selected (= d (ui :currency))} d])]]]\n       [:div.row\n        {:style {:padding 5  :width 300}}\n        [:div.input-group.input-group-sm.mb-3\n         [:div.input-group-prepend\n          {:style {:width 100}}\n          [:span.input-group-text \"Company\"]]\n         [:input.form-control\n          {:on-change #(rf/dispatch-sync [:dividends/company (-> % .-target .-value)])\n           :value (ui :company)\n           :type :text}]]]\n       [:div.row\n        {:style {:padding 5 :width 150}}\n        [:div.input-group.input-group-sm.mb-3\n         [:div.input-group-prepend\n          {:style {:width 40}}\n          [:span.input-group-text (dlogic/get-currency-symbol (ui :currency))]]\n         [:input.form-control\n          {:on-change #(rf/dispatch-sync [:dividends/amount (-> % .-target .-value)])\n           :value (ui :amount)\n           :type :text}]]] \n       [:div.row\n        {:style {:padding 5 :width 300}}\n        [:div.input-group.input-group-sm.mb-3\n         [:div.input-group-prepend\n          {:style {:width 145}}\n          [:span.input-group-text \"Exchange Rate\"]]\n         [:input.form-control\n          {:value (ui :exchange-rate)\n           :type :text}]]]\n       [:div.row\n        {:style {:padding 5}}\n        [:div.col.col-sm-4\n         [:div.input-group.input-group-sm.mb-3\n          {:style {:width 150}}\n          [:div.input-group-prepend\n           {:style {:width 40}}\n           [:span.input-group-text \"\u00a3\"]]\n          [:input.form-control\n           {:value (ui :amount-gbp)\n            :type :text}]]]\n        [:div.col.col-sm-8\n         [:i.fas.fa-calculator \n          {:style {:font-size \"1.5em\" \n                   :cursor :pointer}\n           :on-click (fn [_] (rf/dispatch-sync [:dividends/calculate-amount-gbp]))}]]]\n       [:div.row\n        {:style {:padding 5 :width 150}}\n        [:button.btn.btn-primary \n         {:on-click #(rf/dispatch-sync [:dividends/save-dividend])}\n         \"Add\"]]]]]))\n"]}
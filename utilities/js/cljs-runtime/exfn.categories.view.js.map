{"version":3,"sources":["exfn/categories/view.cljs"],"mappings":"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","names":["exfn.categories.view/category-summary","cljs.core/deref","selected-category-name","re_frame.core.subscribe","selected-purchases","iter__5523__auto__","s__17360","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__17362","cljs.core/chunk-buffer","i__17361","vec__17367","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__17359","cljs.core/chunk-rest","vec__17370","cljs.core/first","cljs.core/cons","cljs.core/rest","purchase","id","cljs.core.sort_by","cljs.core/second","cljs.core/zipmap","cljs.core.range","exfn.month.logic/format-date","exfn.shared.logic/format-number","exfn.categories.view/view","categories","error","loading?","exfn.shared.error/error-indicator","exfn.shared.loading/loading","s__17387","b__17389","i__17388","map__17393","cljs.core/--destructure-map","cljs.core.get","iter__17386","map__17394","category","amount","re-frame.core/dispatch-sync","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.categories.view\n  (:require [exfn.categories.events]\n            [exfn.categories.subscriptions]\n            [re-frame.core :as rf]\n            [reagent.core :as r]\n            [exfn.shared.loading :as loading]\n            [exfn.shared.error :as err]\n            [exfn.month.logic :as mlgc]\n            [goog.string.format]\n            [exfn.shared.logic :as slgc]))\n\n(defn category-summary []\n  (let [selected-category-name @(rf/subscribe [:selected-category-name])\n        selected-purchases @(rf/subscribe [:category-summary])]\n    [:div\n     [:div.row.selected-store\n      selected-category-name]\n     [:div.table-responsive\n      [:table.table.table-striped.table-sm.table-hover\n       [:thead\n        [:tr\n         [:td \"Date\"]\n         [:td \"Narrative\"]\n         [:td \"Account\"]\n         [:td.amount-col \"Amount\"]]]\n       [:tbody\n        (for [[purchase id] (sort-by second (zipmap selected-purchases (range)))]\n          [:tr\n           {:key (str \"sel-pur-\" id)}\n           [:td (mlgc/format-date (purchase :date))]\n           [:td (purchase :narrative)]\n           [:td (purchase :account-name)]\n           [:td.amount-col\n            (slgc/format-number (purchase :amount))]])]]]]))\n\n(defn view []\n  (let [categories @(rf/subscribe [:categories])\n        error     @(rf/subscribe [:error])\n        loading? @(rf/subscribe [:loading?])]\n    [:main.col-md-9.ms-sm-auto.col-lg-10.px-md-4\n     [:div.d-flex.justify-content-between.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom\n      [:h1.h2 \"Categories breakdown\"]]\n     (cond\n       error [err/error-indicator error :purchase]\n       loading? [loading/loading loading?]\n       :else\n       [:div.row\n        [:div.col.col-lg-6\n         [:div {:style {:width 300}}\n          [:div.table-responsive\n           [:table.table.table-striped.table-sm.table-hover\n            [:thead\n             [:tr\n              [:th              \n               \"Category\"]\n              [:th.amount-col.clickable-header\n               \"Total\"]]]\n            [:tbody\n             (for [{:keys [category amount id]} (sort-by :category categories)]\n               [:tr\n                {:key (str \"st-\" category)}\n                [:td {:style {:width 250 :cursor :pointer}\n                      :on-click (fn []\n                                  (rf/dispatch-sync [:get-category-summary [id category]]))}\n                 category]\n                [:td.amount-col\n                  {:style {:cursor :pointer}\n                   :on-click (fn []\n                               (rf/dispatch-sync [:get-category-summary [id category]]))}\n                 (slgc/format-number amount)]])]]]]]\n        [:div.col.col-lg-4\n         [category-summary]]\n        [:div.col.col-lg-2]])]))\n"]}
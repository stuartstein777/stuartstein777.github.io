{"version":3,"sources":["exfn/reports/month_by_month/view.cljs"],"mappings":"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","names":["exfn.reports.month-by-month.view/total-received-rows","report","cljs.core.into","iter__5523__auto__","s__17448","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__17450","cljs.core/chunk-buffer","i__17449","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__17447","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","debit","cljs.core.map","exfn.shared.logic/format-number","exfn.reports.month-by-month.view/total-spent-rows","s__17458","b__17460","i__17459","iter__17457","exfn.reports.month-by-month.view/total-diff-rows","s__17464","b__17466","i__17465","iter__17463","diff","cr","db","exfn.reports.month-by-month.view/category-spend","category","spends","m","and__5043__auto__","exfn.reports.month-by-month.view/interest-rate","accounts","account-name","p1__17467#","cljs.core.filter","cljs.core._EQ_","exfn.reports.month-by-month.view/view","cljs.core/deref","year","re_frame.core.subscribe","error","loading?","cljs.core.apply","cljs.core/map","cljs.core/vector","cljs.core/flatten","cljs.core/group-by","p__17468","vec__17469","cljs.core.nth","name","cljs.core.mapv","category-spends","exfn.reports.month-by-month.logic/flatten-month","exfn.shared.error/error-indicator","exfn.shared.loading/loading","s__17473","b__17475","i__17474","iter__17472","account","balance","s__17481","b__17483","i__17482","iter__17480","r","cljs.core.reduce","cljs.core/+","s__17485","b__17487","i__17486","iter__17484","v","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.reports.month-by-month.view \n  (:require [re-frame.core :as rf]\n            [exfn.shared.subscriptions]\n            [exfn.shared.logic :as slgc]\n            [exfn.shared.error :as err]\n            [exfn.reports.month-by-month.subscriptions]\n            [exfn.reports.month-by-month.logic :as lgc]\n            [exfn.shared.loading :as loading]))\n\n(defn total-received-rows [report]\n  (into [:tr\n         [:td \"Received\"]]\n        (for [debit (map :total-credits report)]\n          [:td.amount-col\n           (slgc/format-number debit)])))\n\n(defn total-spent-rows [report]\n  (into [:tr\n         [:td \"Spent\"]\n         (for [debit (map :total-debits report)]\n           [:td.amount-col\n            (slgc/format-number debit)])]))\n\n(defn total-diff-rows [report]\n  (into [:tr.diff-row\n         [:td\n          {:style {:background-color \"#e9e9e9\"}}\n          \"Difference\"]]\n        (for [diff (map (fn [cr db] (- cr db))\n                        (map :total-credits report)\n                        (map :total-debits report))]\n          [:td.amount-col\n           {:style {:background-color (cond \n                                        (neg? diff) :red\n                                        (zero? diff) \"#e9e9e9\"\n                                        :else \"#00DA00\")}}\n           (slgc/format-number diff)])))\n\n(defn category-spend [category spends]\n  (into\n   [:tr\n    [:td category]]\n   (map (fn [m] [:td.amount-col\n                 (if (and m (m category)) \n                   (slgc/format-number (m category))\n                   \"-\")]) spends)))\n\n(defn interest-rate [accounts account-name]\n  (->> accounts\n       (filter #(= (:account-name %) account-name))\n       (first)\n        :interest-rate))\n\n(defn view []\n  (let [year @(rf/subscribe [:year])\n        error @(rf/subscribe [:error])\n        loading? @(rf/subscribe [:loading?])\n        report @(rf/subscribe [:monthly-summaries/annual-report])\n        \n        accounts (->> report\n                      (map :accounts)\n                      (apply map vector)\n                      (flatten)\n                      (group-by :account-name)\n                      (map (fn [[name accounts]]\n                             {:account-name name\n                              :interest-rate (interest-rate accounts name)\n                              :balances     (mapv :balance accounts)})))\n        category-spends (map lgc/flatten-month (map :category-spends report))]\n    [:main.col-md-9.ms-sm-auto.col-lg-10.px-md-4\n     [:div.d-flex.justify-content-between.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom\n      [:h1.h2 (str \"Annual Breakdown - \" year)]]\n     [:div\n      (cond\n        error    [err/error-indicator error :month]\n        loading? [loading/loading loading?]\n        :else\n        [:div.table-responsive\n         [:table.table.table-sm.table-hover\n          [:thead\n           [:tr\n            {:style {:background-color \"#171819\"\n                     :color            :white}}\n            [:td \"\"]\n            [:td.month-col \"Jan\"]\n            [:td.month-col \"Feb\"]\n            [:td.month-col \"Mar\"]\n            [:td.month-col \"Apr\"]\n            [:td.month-col \"May\"]\n            [:td.month-col \"Jun\"]\n            [:td.month-col \"Jul\"]\n            [:td.month-col \"Aug\"]\n            [:td.month-col \"Sep\"]\n            [:td.month-col \"Oct\"]\n            [:td.month-col \"Nov\"]\n            [:td.month-col \"Dec\"]]]\n          [:tbody\n           [total-received-rows report]\n           [total-spent-rows report]\n           [total-diff-rows report]\n           [:tr {:style {:height 25}}\n            [:td \"\"]]\n           [:tr\n            {:style {:background-color \"#171819\" \n                     :color            :white}}\n            [:td.col\n             {:style   {:font-weight :bold}\n              :colSpan 13}\n             \"Balances @ EOM\"]]\n           (for [account accounts]\n             (into\n              [:tr\n               [:td \n                (if (zero? (:interest-rate account))\n                  (:account-name account)\n                  (str (:account-name account) \" (\" (:interest-rate account) \"%)\"))]]\n              (map\n               (fn [balance]\n                 [:td.amount-col\n                  {:style {:color (if (neg? balance) :red :black)}}\n                  (slgc/format-number balance)])\n               (:balances account))))\n           (into\n            [:tr.total-row\n             [:td\n              {:style {:font-weight :bold}}\n              \"Total\"]]\n            (for [r report]\n              [:td.amount-col\n               (slgc/format-number (->> r\n                                        :accounts\n                                        (map :balance)\n                                        (reduce +)))]))\n           \n           (into\n            [:tr\n             [:td \n              {:style   {:font-weight :bold}}\n              \"Total to savings\"]\n             (for [v (map :total-to-savings report)]\n               [:td.amount-col (slgc/format-number v)])])\n           \n           [:tr {:style {:height 25}} [:td]]\n           [:tr\n            {:style {:background-color \"#171819\"\n                     :color            :white}}\n            [:td\n             {:style   {:font-weight :bold}\n              :colSpan 13}\n             \"Categories\"]]\n           [category-spend \"Night Out Beers\"          category-spends]\n           [category-spend \"Transport\"                category-spends]\n           [category-spend \"Eating Out\"               category-spends]\n           [category-spend \"Groceries\"                category-spends]\n           [category-spend \"Internet and Telephone\"   category-spends]\n           [category-spend \"Mortgage\"                 category-spends]\n           [category-spend \"Factors\"                  category-spends]\n           [category-spend \"Council Tax\"              category-spends]\n           [category-spend \"Utilities\"                category-spends]\n           [category-spend \"TV and Entertainment\"     category-spends]\n           [category-spend \"Digital Subscriptions\"    category-spends]\n           [category-spend \"Haircut\"                  category-spends]\n           [category-spend \"Misc\"                     category-spends]\n           [category-spend \"Books and Comics\"         category-spends]\n           [category-spend \"Music\"                    category-spends]\n           [category-spend \"Holidays\"                 category-spends]\n           [category-spend \"Hotel\"                    category-spends]\n           [category-spend \"Study and Courses\"        category-spends]\n           [category-spend \"Student Loan Overpayment\" category-spends]\n           [category-spend \"Photo Prints\"             category-spends]\n           [category-spend \"Clothing\"                 category-spends]\n           [category-spend \"Concerts\"                 category-spends]]]])]]))\n"]}
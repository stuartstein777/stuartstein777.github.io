{"version":3,"sources":["exfn/app.cljs"],"mappings":"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","names":["exfn.app/display-message","cljs.core/deref","error","re_frame.core.subscribe","game-state","current-row","num-of-guesses","word","cljs.core._EQ_","exfn.app/histogram-row","n","solves","stats","cljs.core.get","exfn.app/stats-view","stats-visible","re-frame.core/dispatch-sync","exfn.logic/guess-distribution-histogram","iter__4529__auto__","s__32051","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__32053","cljs.core/chunk-buffer","i__32052","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__32050","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","cljs.core.range","exfn.app/guess-background","col","row","guesses","row-guess","and__4115__auto__","G__32055","fexpr__32054","cljs.core/set","cljs.core.nth","exfn.app/guess-row","current-col","rows","row-no","cljs.core.doall","s__32057","b__32059","i__32058","iter__32056","cljs.core.not_EQ_","cljs.core.get_in","cljs.core.keyword","exfn.app/get-key-bg","guessed-letters","correct-letters","key","fexpr__32060","fexpr__32061","exfn.app/keyboard-row","keys","s__32063","b__32065","i__32064","iter__32062","letter","clojure.string.split","re-frame.core/dispatch","exfn.app/new-game-row","pred__32066","expr__32067","js/Error","cljs.core/=","exfn.app/app","s__32070","b__32072","i__32071","iter__32069","exfn.app/start","re-frame.core/clear-subscription-cache!","reagent.dom.render","js/document","exfn.app/init","js/window","gfg","js/exfn","js/exfn.app","js/exfn.app.initialize","exfn.app/initialize","cljs.core/chunk-first"],"sourcesContent":["(ns exfn.app\n  (:require [reagent.dom :as dom]\n            [re-frame.core :as rf]\n            [exfn.subscriptions]\n            [clojure.string :as str]\n            [exfn.events]\n            [exfn.logic :as lgc]\n            [goog.string.format]))\n\n(defn display-message []\n  (let [error @(rf/subscribe [:error])\n        game-state @(rf/subscribe [:game-state])\n        current-row @(rf/subscribe [:current-row])\n        num-of-guesses (dec current-row)\n        word @(rf/subscribe [:word])]\n    [:div.invalid-word-error\n     (cond\n       error\n       {:data-error error}\n\n       (= game-state :won)\n       {:data-win (= game-state :won)}\n\n       (= game-state :lost)\n       {:data-lost (= game-state :lost)})\n     (cond\n       error\n       \"Not in word list!\"\n\n       (= game-state :lost)\n       word\n       \n       (and (= game-state :won) (= num-of-guesses 1))\n       \"Genuis!\"\n\n       (and (= game-state :won) (= num-of-guesses 2))\n       \"Magnificient!\"\n\n       (and (= game-state :won) (= num-of-guesses 3))\n       \"Impressive!\"\n\n       (and (= game-state :won) (= num-of-guesses 4))\n       \"Splendid!\"\n\n       (and (= game-state :won) (= num-of-guesses 5))\n       \"Great!\"\n\n       (and (= game-state :won) (= num-of-guesses 6))\n       \"Phew!\")]))\n\n(defn histogram-row [n solves stats]\n  [:div.row {:style {:width \"100%\"}}\n   [:div.col.col-lg-2 n]\n   [:div.col.col-lg-10\n    [:div.histogram-bar\n     {:style {:width (solves n)\n              :background-color (if (> (solves n) 0) \"#538d4e\" \"#3a3a3c\")}\n      :key (str \"stats-\" n)}\n     (get (stats :solves) n)]]])\n\n(defn stats-view []\n  (let [stats @(rf/subscribe [:stats])\n        stats-visible @(rf/subscribe [:stats-visible])]\n    [:div.stats-view\n     {:style {:visibility (if stats-visible :visible :hidden)}}\n     [:div.row.closex {:on-click #(rf/dispatch-sync [:toggle-stats])}\n      \"X\"]\n     [:div.row {:style {:width \"100%\"}}\n      [:h4 \"Stats for session\"]]\n     [:div.row.streak-summary {:style {:width \"100%\"}}\n      [:div.col.streak-value\n       (stats :played)]\n      [:div.col.streak-value\n       (if (> (stats :played) 0)\n         (int (* (/ (stats :wins) (stats :played)) 100.0))\n         \"-\")]\n      [:div.col.streak-value\n       (stats :current-streak)]\n      [:div.col.streak-value\n       (stats :max-streak)]]\n     [:div.row.streak-summary {:style {:width \"100%\"}}\n      [:div.col.streak-header\n       \"Played\"]\n      [:div.col.streak-header\n       \"Win %\"]\n      [:div.col.streak-header\n       \"Current streak\"]\n      [:div.col.streak-header\n       \"Max streak\"]]\n     [:div.row \n      {:style {:padding-top \"20px\"\n               :width \"100%\"}}\n      [:h4 \"GUESS DISTRIBUTION\"]]\n     (let [solves (lgc/guess-distribution-histogram (stats :solves))]\n       [:div.row {:style {:display :grid\n                          :padding-left \"20px\"}}\n        (for [n (range 1 7)]\n          [histogram-row n solves stats])])]))\n\n(defn guess-background [col row]\n  (let [word        @(rf/subscribe [:word])\n        current-row @(rf/subscribe [:current-row])\n        guesses     @(rf/subscribe [:guesses])\n        row-guess   (guesses row)]\n    (if (> current-row row)\n      (if (and row-guess ((set word) (row-guess col)))\n        (if (= (nth word (dec col)) (row-guess col))\n          \"#538d4e\"\n          \"#b59f3b\")\n        \"#3a3a3c\")\n      \"#121213\")))\n\n(defn guess-row [current-row current-col rows error row-no game-state]\n  [:div.row {:style {:justify-content :center}\n             :key (str \"guess-row-\" row-no)}\n   (doall\n    (for [n (range 1 6)]\n      #_(prn (str \"guess-row-\" row-no \"-\" n))\n      [:div.letter-cell\n       {:key (str row-no \"-\" n)\n        \n        :data-filled (and (= n current-col)\n                          (= row-no current-row)\n                          (not= \"\" (get-in rows [row-no n])))\n        :data-error (and error (= current-row row-no))\n        :data-guessed (= 1 (- current-row row-no))\n        \n        (keyword (str \"data-won\" n))\n        (and (= 1 (- current-row row-no)) (= game-state :won))\n        \n        :style {:background-color (guess-background n row-no)}}\n       (get-in rows [row-no n])]))])\n\n(defn get-key-bg [guessed-letters correct-letters key]\n  (cond\n    (and (guessed-letters key) ((-> correct-letters :green) key))\n    \"#538d4e\"\n    \n    (and (guessed-letters key) ((-> correct-letters :yellow) key))\n    \"#b59f3b\"\n    \n    (guessed-letters key)\n    \"#3a3a3c\"\n    \n    :else\n    \"#818384\"))\n\n(defn keyboard-row [keys]\n  (let [guessed-letters @(rf/subscribe [:guessed-letters])\n        correct-letters @(rf/subscribe [:correct-letters])]\n    [:div.keyboard-row\n     (for [letter (str/split keys #\"-\")]\n       [:div.keyboard-key \n        {:on-click #(rf/dispatch [:clicked letter])\n         :style    {:background-color (get-key-bg guessed-letters correct-letters letter)}\n         :key      letter} letter])]))\n\n(defn new-game-row []\n  (let [game-state @(rf/subscribe [:game-state])]\n    [:div.keyboard-row\n     [:div.keyboard-key\n      {:style {:width \"100%\"\n               :visibility (condp = game-state\n                             :won :visible\n                             :lost :visible\n                             :playing :hidden)}\n       :on-click #(rf/dispatch [:new-game])}\n      \"New Game\"]]))\n\n;; -- App -------------------------------------------------------------------------\n(defn app []\n  (let [rows  @(rf/subscribe [:guesses])\n        error @(rf/subscribe [:error])\n        current-row @(rf/subscribe [:current-row])\n        current-col @(rf/subscribe [:current-col])\n        game-state @(rf/subscribe [:game-state])]\n    [:div.container\n     [:div.game\n      [display-message]\n      [stats-view]\n      [:div.row\n       [:div.col.col-lg-8\n        [:h1 \"Wordle\"]]\n       [:div.col.col-lg-4\n        [:i.fas.fa-cubes.stats {:on-click #(rf/dispatch-sync [:toggle-stats])}]]]\n      [:div.row.guesses\n       (for [n (range 1 7)]\n         [guess-row current-row current-col rows error n game-state])]\n      [:div.keyboard\n       [keyboard-row \"Q-W-E-R-T-Y-U-I-O-P\"]\n       [keyboard-row \"A-S-D-F-G-H-J-K-L\"]\n       [keyboard-row \"ENTER-Z-X-C-V-B-N-M-DEL\"]\n       [new-game-row]]]]))\n\n;; -- After-Load --------------------------------------------------------------------\n;; Do this after the page has loaded.\n;; Initialize the initial db state.\n(defn ^:dev/after-load start\n  []\n  (rf/clear-subscription-cache!)\n  (dom/render [app]\n              (.getElementById js/document \"app\")))\n\n(defn ^:export init []\n  (set! (.-onkeydown js/window)\n        (fn [gfg]\n          (rf/dispatch-sync [:key-pressed (.-keyCode gfg)])))\n  (start))\n\n; dispatch the event which will create the initial state. \n(defonce initialize (rf/dispatch-sync [:initialize]))\n\n"]}